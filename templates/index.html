{% extends 'base.html' %}
{% load i18n %}
{% load static %}
{% block content %}


<body>
<!-- Slider
================================================== -->

<div id="homeSlider" class="royalSlider rsDefaultInv">


	<!-- Slide #1 -->
	<div class="rsContent">
		<a class="rsImg" href="{% static 'images/sliderA_01.jpg' %}"></a>
		<i class="rsTmb">Mexican Grilled <br> Corn Recipe</i>

		<!-- Slide Caption -->
		<div class="SlideTitleContainer rsABlock">
		<div class="CaptionAlignment">
			<div class="rsSlideTitle tags">
				<ul>
					<li>Baking</li>
				</ul>
				<div class="clearfix"></div>
			</div>

			<h2 class="rsSlideTitle title"><a href="recipe-page-1.html">Mexican Grilled Corn Recipe</a></h2>

			<div class="rsSlideTitle details">
				<ul>
					<li><i class="fa fa-cutlery"></i> 4 Servings</li>
					<li><i class="fa fa-clock-o"></i> 30 Min</li>
					<li><i class="fa fa-user"></i> by <a href="#">Sandra Fortin</a></li>
				</ul>
			</div>

			<a href="recipe-page-1.html" class="rsSlideTitle button">View Recipe</a>
		</div>
		</div>

	</div>




	<!-- Slide #1 -->
	<div class="rsContent">
		<a class="rsImg" href="{% static 'images/sliderA_01.jpg' %}"></a>
		<i class="rsTmb">Mexican Grilled <br> Corn Recipe</i>

		<!-- Slide Caption -->
		<div class="SlideTitleContainer rsABlock">
		<div class="CaptionAlignment">
			<div class="rsSlideTitle tags">
				<ul>
					<li>Baking</li>
				</ul>
				<div class="clearfix"></div>
			</div>

			<h2 class="rsSlideTitle title"><a href="recipe-page-1.html">Mexican Grilled Corn Recipe</a></h2>

			<div class="rsSlideTitle details">
				<ul>
					<li><i class="fa fa-cutlery"></i> 4 Servings</li>
					<li><i class="fa fa-clock-o"></i> 30 Min</li>
					<li><i class="fa fa-user"></i> by <a href="#">Sandra Fortin</a></li>
				</ul>
			</div>

			<a href="recipe-page-1.html" class="rsSlideTitle button">View Recipe</a>
		</div>
		</div>

	</div>

	<!-- Slide #2 -->
	<div class="rsContent">
		<a class="rsImg" href="{% static 'images/sliderA_02.jpg' %}"></a>
		<i class="rsTmb">Roast Chicken <br>With Lemon Gravy</i>

		<!-- Slide Caption -->
		<div class="SlideTitleContainer rsABlock">
		<div class="CaptionAlignment">
			<div class="rsSlideTitle tags">
				<ul>
					<li>Curry</li>
				</ul>
				<div class="clearfix"></div>
			</div>

			<h2 class="rsSlideTitle title"><a href="recipe-page-1.html">Roast Chicken <br>With Lemon Gravy</a></h2>

			<div class="rsSlideTitle details">
				<ul>
					<li><i class="fa fa-cutlery"></i> 4 Servings</li>
					<li><i class="fa fa-clock-o"></i> 1 Hr 20 Min</li>
					<li><i class="fa fa-user"></i> by <a href="#">Sandra Fortin</a></li>
				</ul>
			</div>

			<a href="recipe-page-1.html" class="rsSlideTitle button">View Recipe</a>
		</div>
		</div>

	</div>
	
	<!-- Slide #3 -->
	<div class="rsContent">
		<a class="rsImg" href="{% static 'images/sliderA_03.jpg' %}"></a>
		<i class="rsTmb">Avocado Melon Salad <br> With Lime Vinaigrette </i>

		<!-- Slide Caption -->
		<div class="SlideTitleContainer rsABlock">
		<div class="CaptionAlignment">
			<div class="rsSlideTitle tags">
				<ul>
					<li>Salads</li>
				</ul>
				<div class="clearfix"></div>
			</div>

			<h2 class="rsSlideTitle title"><a href="recipe-page-2.html">Avocado Melon Salad With Lime Vinaigrette</a></h2>

			<div class="rsSlideTitle details">
				<ul>
					<li><i class="fa fa-cutlery"></i> 1 Servings</li>
					<li><i class="fa fa-clock-o"></i> 15 Min</li>
					<li><i class="fa fa-user"></i> by <a href="#">Sandra Fortin</a></li>
				</ul>
			</div>

			<a href="recipe-page-2.html" class="rsSlideTitle button">View Recipe</a>
		</div>
		</div>

	</div>
	
	<!-- Slide #4 -->   
	<div class="rsContent">
		<a class="rsImg" href="{% static 'images/sliderA_04.jpg' %}"></a>
		<i class="rsTmb">Chunky Beef Stew</i>

		<!-- Slide Caption -->
		<div class="SlideTitleContainer rsABlock">
		<div class="CaptionAlignment">
			<div class="rsSlideTitle tags">
				<ul>
					<li>Beef</li>
				</ul>
				<div class="clearfix"></div>
			</div>

			<h2 class="rsSlideTitle title"><a href="recipe-page-1.html">Chunky Beef Stew</a></h2>

			<div class="rsSlideTitle details">
				<ul>
					<li><i class="fa fa-cutlery"></i> 4 Servings</li>
					<li><i class="fa fa-clock-o"></i> 2 Hr 30 Min</li>
					<li><i class="fa fa-user"></i> by <a href="#">Sandra Fortin</a></li>
				</ul>
			</div>

			<a href="recipe-page-1.html" class="rsSlideTitle button">View Recipe</a>
		</div>
		</div>

	</div>          
	
	<!-- Slide #5 -->
	<div class="rsContent">
		<a class="rsImg" href="{% static 'images/sliderA_05.jpg' %}"></a>
		<i class="rsTmb">Farmhouse Vegetable <br> And Barley Soup</i>

		<!-- Slide Caption -->
		<div class="SlideTitleContainer rsABlock">
		<div class="CaptionAlignment">
			<div class="rsSlideTitle tags">
				<ul>
					<li>Soups</li>
				</ul>
				<div class="clearfix"></div>
			</div>

			<h2 class="rsSlideTitle title"><a href="recipe-page-1.html">Farmhouse Vegetable And Barley Soup</a></h2>

			<div class="rsSlideTitle details">
				<ul>
					<li><i class="fa fa-cutlery"></i> 4 Servings</li>
					<li><i class="fa fa-clock-o"></i> 1 Hr 30 Min</li>
					<li><i class="fa fa-user"></i> by <a href="#">Sandra Fortin</a></li>
				</ul>
			</div>

			<a href="recipe-page-1.html" class="rsSlideTitle button">View Recipe</a>
		</div>
		</div>

	</div>

</div>



<!-- Content
================================================== -->
<div class="container">

	<!-- Masonry -->
	<div class="twelve columns">

		<!-- Headline -->
 		<h3 class="headline">Latest Recipes</h3>
		<span class="line rb margin-bottom-35"></span>
		<div class="clearfix"></div>

		<!-- Isotope -->
		<div class="isotope">
			
			{% for post in posts %}
			<!-- Recipe #1 -->
			<div class="four recipe-box columns">

				<!-- Thumbnail -->
				<div class="thumbnail-holder">
					<a href="{% url 'bab:recipepage' post.pk%}">
						<img src="{% static 'images/recipeThumb-01.jpg' %}" alt=""/>
						<div class="hover-cover"></div>
						<div class="hover-icon">View Recipe</div>
					</a>
				</div>

				<!-- Content -->
				<div class="recipe-box-content">
					<h3><a href="{% url 'bab:recipepage' post.pk %}">{{ post.title }}</a></h3>
					
					<!-- Add icon library -->
					<!-- <div class="container">
							<input name="my_input" value="3" id="rating_star" type="text"> or <input name="my_input" value="3" id="rating_star" type="hidden">
							
						</div> -->
						<fieldset id="search_fieldset"> 
							<input id="search_input" type="search" /> 
							<button id="search_button" type="submit">
								<i class="fa fa-search"></i></button> 
							</fieldset> ... 
							<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
							<script> 
							$('#search_button').click(function(){
								 var search_key = $('#search_input').val() 
								 $.ajax({
									    url:'search/',
									    data : { 'search_key':search_key}, 
									    success:function(data){ 
										   $('#data_table').html(data) 
										} 
									}) 
								}) 
								</script>

			
						<div class="like">
							{{ post.likes_count }}명이 좋아합니다.
							{% if user in post.likes.all %}
								<a href="{% url 'bab:like_toggle' post.id %}">좋아요 취소</a>
							{% else %}
								<a href="{% url 'bab:like_toggle' post.id %}">좋아요</a>
							{% endif %}
							
							<br>
							<p>좋아요{{ post.likes_count }}개<p>
							{% if user in post.favorite.all %}
								<a href="{% url 'bab:favorite_toggle' post.id %}">즐겨찾기 취소</a>
							{% else %}
								<a href="{% url 'bab:favorite_toggle' post.id %}">즐겨찾기 추가</a>
							{% endif %}
							{% if user != post.user %}
								{% if user in post.user.followers.all %}
									<a href="{% url 'users:follow_toggle' post.user.id %}" class="btn btn-primary right">팔로우 취소</a>
								{% else %}
									<a href="{% url 'users:follow_toggle' post.user.id %}" class="btn btn-primary right">팔로우</a>
								{% endif %}
							{% endif %}
						</div>
						<div class="star">
							<input name="my_input" value="3" id="rating_simple" type="text"> or <input name="my_input" value="3" id="rating_simple" type="hidden">
						</div>
						
					<script language="javascript" type="text/javascript">
						$(function() {
						$("#rating_simple").webwidget_rating_simple({
						rating_star_length: '5',
						rating_initial_value: '',
						rating_function_name: '',
						directory: "{% static 'images/web_widget_star.gif' %}"
						});
						});
						</script>
					<!-- <script language="javascript" type="text/javascript">
						$(function() {
						$("#rating_star").webwidget_rating_sex({
						rating_star_length: '5',
						rating_initial_value: '',
						rating_function_name: '',
						directory: "{% static 'images/web_widget_star.gif' %}"
						});
						});
						</script> -->
						
				
					<div class="recipe-meta"><i class="fa fa-clock-o"></i> {{ post.view_count }}</div>

					<div class="clearfix"></div>
				</div>
			</div>
			{% endfor %}


			<!-- Recipe #1 -->
			<div class="four recipe-box columns">

				<!-- Thumbnail -->
				<div class="thumbnail-holder">
					<a href="recipe-page-1.html">
						<img src="{% static 'images/recipeThumb-01.jpg' %}" alt=""/>
						<div class="hover-cover"></div>
						<div class="hover-icon">View Recipe</div>
					</a>
				</div>

				<!-- Content -->
				<div class="recipe-box-content">
					<h3><a href="recipe-page-1.html">Mexican Grilled <br> Corn Recipe</a></h3>
					
					<div class="rating five-stars">
						<div class="star-rating"></div>
						<div class="star-bg"></div>
					</div>

					<div class="recipe-meta"><i class="fa fa-clock-o"></i> 30 min</div>

					<div class="clearfix"></div>
				</div>
			</div>

			<!-- Recipe #2 -->
			<div class="four recipe-box columns">

				<!-- Thumbnail -->
				<div class="thumbnail-holder">
					<a href="recipe-page-2.html">
						<img src="{% static 'images/recipeThumb-02.jpg' %}" alt=""/>
						<div class="hover-cover"></div>
						<div class="hover-icon">View Recipe</div>
					</a>
				</div>
				
				<!-- Content -->
				<div class="recipe-box-content">
					<h3><a href="recipe-page-2.html">Choclate Cake With Green Tea Cream</a></h3>
					
					<div class="rating four-stars">
						<div class="star-rating"></div>
						<div class="star-bg"></div>
					</div>

					<div class="recipe-meta"><i class="fa fa-clock-o"></i> 1 hr 30 min</div>

					<div class="clearfix"></div>
				</div>
			</div>

			<!-- Recipe #3 -->
			<div class="four recipe-box columns">

				<!-- Thumbnail -->
				<div class="thumbnail-holder">
					<a href="recipe-page-1.html">
						<img src="{% static 'images/recipeThumb-03.jpg' %}" alt=""/>
						<div class="hover-cover"></div>
						<div class="hover-icon">View Recipe</div>
					</a>
				</div>
				
				<!-- Content -->
				<div class="recipe-box-content">
					<h3><a href="recipe-page-1.html">Thai Yellow Curry Chicken</a></h3>
					
					<div class="rating five-stars">
						<div class="star-rating"></div>
						<div class="star-bg"></div>
					</div>

					<div class="recipe-meta"><i class="fa fa-clock-o"></i> 45 min</div>

					<div class="clearfix"></div>
				</div>
			</div>

			<!-- Recipe #4 -->
			<div class="four recipe-box columns">

				<!-- Thumbnail -->
				<div class="thumbnail-holder">
					<a href="recipe-page-2.html">
						<img src="{% static 'images/recipeThumb-04.jpg' %}" alt=""/>
						<div class="hover-cover"></div>
						<div class="hover-icon">View Recipe</div>
					</a>
				</div>
				
				<!-- Content -->
				<div class="recipe-box-content">
					<h3><a href="recipe-page-2.html">Avocado Melon Salad With Lime Vinaigrette</a></h3>
					
					<div class="rating four-stars">
						<div class="star-rating"></div>
						<div class="star-bg"></div>
					</div>

					<div class="recipe-meta"><i class="fa fa-clock-o"></i> 15 min</div>

					<div class="clearfix"></div>
				</div>
			</div>

			<!-- Recipe #5 -->
			<div class="four recipe-box columns">

				<!-- Thumbnail -->
				<div class="thumbnail-holder">
					<a href="recipe-page-1.html">
						<img src="{% static 'images/recipeThumb-05.jpg' %}" alt=""/>
						<div class="hover-cover"></div>
						<div class="hover-icon">View Recipe</div>
					</a>
				</div>
				
				<!-- Content -->
				<div class="recipe-box-content">
					<h3><a href="recipe-page-1.html">Pollo Borracho With Homemade Tortillas</a></h3>
					
					<div class="rating four-stars">
						<div class="star-rating"></div>
						<div class="star-bg"></div>
					</div>

					<div class="recipe-meta"><i class="fa fa-clock-o"></i> 30 min</div>

					<div class="clearfix"></div>
				</div>
			</div>

			<!-- Recipe #6 -->
			<div class="four recipe-box columns">

				<!-- Thumbnail -->
				<div class="thumbnail-holder">
					<a href="recipe-page-2.html">
						<img src="{% static 'images/recipeThumb-06.jpg' %}" alt=""/>
						<div class="hover-cover"></div>
						<div class="hover-icon">View Recipe</div>
					</a>
				</div>
				
				<!-- Content -->
				<div class="recipe-box-content">
					<h3><a href="recipe-page-2.html">Sweet Chilli and Lime Chicken Wings</a></h3>
					
					<div class="rating five-stars">
						<div class="star-rating"></div>
						<div class="star-bg"></div>
					</div>

					<div class="recipe-meta"><i class="fa fa-clock-o"></i> 45 min</div>

					<div class="clearfix"></div>
				</div>
			</div>

			<!-- Recipe #7 -->
			<div class="four recipe-box columns">

				<!-- Thumbnail -->
				<div class="thumbnail-holder">
					<a href="recipe-page-2.html">
						<img src="{% static 'images/recipeThumb-07.jpg' %}" alt=""/>
						<div class="hover-cover"></div>
						<div class="hover-icon">View Recipe</div>
					</a>
				</div>
				
				<!-- Content -->
				<div class="recipe-box-content">
					<h3><a href="recipe-page-2.html">Roast Chicken With Lemon Gravy</a></h3>
					
					<div class="rating five-stars">
						<div class="star-rating"></div>
						<div class="star-bg"></div>
					</div>

					<div class="recipe-meta"><i class="fa fa-clock-o"></i> 1 hr 20 min</div>

					<div class="clearfix"></div>
				</div>
			</div>

			<!-- Recipe #8 -->
			<div class="four recipe-box columns">

				<!-- Thumbnail -->
				<div class="thumbnail-holder">
					<a href="recipe-page-1.html">
						<img src="{% static 'images/recipeThumb-08.jpg' %}" alt=""/>
						<div class="hover-cover"></div>
						<div class="hover-icon">View Recipe</div>
					</a>
				</div>
				
				<!-- Content -->
				<div class="recipe-box-content">
					<h3><a href="recipe-page-1.html">Farmhouse Vegetable And Barley Soup</a></h3>
					
					<div class="rating four-stars">
						<div class="star-rating"></div>
						<div class="star-bg"></div>
					</div>

					<div class="recipe-meta"><i class="fa fa-clock-o"></i> 1 hr 30 min</div>

					<div class="clearfix"></div>
				</div>
			</div>

			<!-- Recipe #9 -->
			<div class="four recipe-box columns">

				<!-- Thumbnail -->
				<div class="thumbnail-holder">
					<a href="recipe-page-1.html">
						<img src="{% static 'images/recipeThumb-09.jpg' %}" alt=""/>
						<div class="hover-cover"></div>
						<div class="hover-icon">View Recipe</div>
					</a>
				</div>
				
				<!-- Content -->
				<div class="recipe-box-content">
					<h3><a href="recipe-page-1.html">Chunky Beef Stew</a></h3>
					
					<div class="rating five-stars">
						<div class="star-rating"></div>
						<div class="star-bg"></div>
					</div>

					<div class="recipe-meta"><i class="fa fa-clock-o"></i> 2 hr 30 min</div>

					<div class="clearfix"></div>
				</div>
			</div>

		</div>
		<div class="clearfix"></div>

		<!-- Pagination -->
		<div class="pagination-container masonry">
			<nav class="pagination">
				<ul>
					<li><a href="#" class="current-page">1</a></li>
					<li><a href="#">2</a></li>
					<li><a href="#">3</a></li>
				</ul>
			</nav>

			<nav class="pagination-next-prev">
				<ul>
					<li><a href="#" class="prev"></a></li>
					<li><a href="#" class="next"></a></li>
				</ul>
			</nav>
		</div>

	</div>


<!-- Sidebar
================================================== -->
<div class="four columns">

	<!-- Search Form -->
	<div class="widget search-form">
		<nav class="search">
			<form action="#" method="get">
					{% csrf_token %}
				<button><i class="fa fa-search"></i></button>
				<input class="search-field" type="text" placeholder="Search for recipes" value=""/>
			</form>
		</nav>
		<div class="clearfix"></div>
	</div>


	<!-- Author Box -->
	<div class="widget">
		<div class="author-box">
			<span class="title">Author</span>
			<span class="name">Sandra <br> Fortin</span>
			<span class="contact"><a href="mailto:sandra@chow.com">sandra@chow.com</a></span>
			<img src="{% static 'images/author-photo.png' %}" alt="">
			<p>I'm Sandra and this is where I share my stuff. I am madly in love with food. You will find a balance of healthy recipes, comfort food and indulgent desserts.</p>
		</div>
	</div>


	<!-- Popular Recipes -->
	<div class="widget">
		<h4 class="headline">Popular Recipes</h4>
		<span class="line margin-bottom-30"></span>
		<div class="clearfix"></div>
		
		<!-- Recipe #1 -->
		<a href="recipe-page-1.html" class="featured-recipe">
			<img src="{% static 'images/featuredRecipe-01.jpg' %}" alt="">

			<div class="featured-recipe-content">
				<h4>Choclate Cake With Green Tea Cream</h4>
			
				<div class="rating five-stars">
					<div class="star-rating"></div>
					<div class="star-bg"></div>
				</div>
			</div>
			<div class="post-icon"></div>
		</a>
<!-- 수정했습니다! -->ddddd
		<!-- Recipe #2 -->
		<a href="recipe-page-1.html" class="featured-recipe">
			<img src="{% static 'images/featuredRecipe-02.jpg' %}" alt="">

			<div class="featured-recipe-content">
				<h4>Mexican Grilled Corn Recipe</h4>
			
				<div class="rating five-stars">
					<div class="star-rating"></div>
					<div class="star-bg"></div>
				</div>
			</div>
			<div class="post-icon"></div>
		</a>

		<!-- Recipe #3 -->
		<a href="recipe-page-1.html" class="featured-recipe">
			<img src="{% static 'images/featuredRecipe-03.jpg' %}" alt="">

			<div class="featured-recipe-content">
				<h4>Pollo Borracho With Homemade Tortillas</h4>
			
				<div class="rating five-stars">
					<div class="star-rating"></div>
					<div class="star-bg"></div>
				</div>
			</div>
			<div class="post-icon"></div>
		</a>

		<div class="clearfix"></div>
	</div>


	
</div>


</div>
<!-- Container / End -->

<div class="margin-top-5"></div>


</div>


<!-- rating.js file -->
<script src="{% static 'scripts/rating.js' %}"></script>
					
<script>// Rating Initialization
	$(document).ready(function() {
		$('#rateMe2').mdbRate();
	});
</script>
<!-- <script type="text/javascript" src="{% static 'scripts/jquery-1.3.2.min.js' %}"></script>
<link href="{% static 'css/rating_star.css' %}" rel="stylesheet" type="text/css">
<script type="text/javascript" src="{% static 'scripts/rating_star.js' %}"></script> -->
<script type="text/javascript" src="{% static 'scripts/jquery.js' %}"></script>
<link href="{% static 'css/rating_simple.css' %}" rel="stylesheet" type="text/css">
<script type="text/javascript" src="{% static 'scripts/rating_simple.js' %}"></script>


<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript">
  $(".like").click(function(){
    var pk = $(this).attr('name')
    $.ajax({ // .like 버튼을 클릭하면 <새로고침> 없이 ajax로 서버와 통신하겠다.
      type: "POST", // 데이터를 전송하는 방법을 지정
      url: "{% url 'bab:post_like' %}", // 통신할 url을 지정
      data: {'pk': pk, 'csrfmiddlewaretoken': '{{ csrf_token }}'}, // 서버로 데이터 전송시 옵션
      dataType: "json", // 서버측에서 전송한 데이터를 어떤 형식의 데이터로서 해석할 것인가를 지정, 없으면 알아서 판단
      // 서버측에서 전송한 Response 데이터 형식 (json)
      // {'likes_count': post.like_count, 'message': message }
      success: function(response){ // 통신 성공시 - 동적으로 좋아요 갯수 변경, 유저 목록 변경
        alert(response.message);
        var users = $("#like-user-"+pk).text();
        $("#count-"+pk).html(response.like_count+"개");
      },
      error: function(request, status, error){ // 통신 실패시 - 로그인 페이지 리다이렉트
        alert("로그인이 필요합니다.")
        window.location.replace("/accounts/login/")
        //  alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
      },
    });
  })
</script>



<!-- Wrapper / End -->


</body>
</html>

{% endblock %}